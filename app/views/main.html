<br>
<div>
  <h2>Mortgage Amortization Calculator</h2>
  <h3>It's fast!!</h3>

</div>

<div ng-controller="Ctrl">



   <div tabs>

    <div pane heading="Overview">
      <h3>Overview</h3>

  <p><u>Amortization</u> (or amortisation) is the process of decreasing, or accounting for, an amount over a period. When used in the context of a home purchase, amortization is the process by which loan principal decreases over the life of a loan. With each mortgage payment that is made, a portion of the payment is applied towards reducing the principal, and another portion of the payment is applied towards paying the interest on the loan.</p>


  <p>An <u>amortization schedule</u> is a table detailing each periodic payment on an amortizing loan (typically a mortgage), as generated by an amortization calculator. While a portion of every payment is applied towards both the interest and the principal balance of the loan, the exact amount applied to principal each time varies (with the ruainder going to interest). An amortization schedule reveals the specific monetary amount put towards interest, as well as the specific amount put towards the principal balance, with each payment. Initially, a large portion of each payment is devoted to interest. As the loan matures, larger portions go towards paying down the principal.</p>

    </div>


    <div pane heading="Schedule">
      <h3>Mortage Amortization Schedule</h3>
      <p>&nbsp;</p>

      <div class="clearfix">

        <div class="schedule-sliders pull-left clearfix">
            <form>
              <label>Loan amount: {{ initialPrinciple.handle1 | currency }}</label>
              <slider options="initialPrinciple" />
              <br>

              <label>Annual interest rate: {{ annualIntrestRate.handle1 }}%</label>
              <slider options="annualIntrestRate"/>
              <br>

              <label>Number of years: {{ termInYears.handle1 }}</label>
              <slider options="termInYears" />
              <br>

              <label>Principle paydown per pay period: {{ paydown.handle1 | currency }} </label>
              <slider options="paydown" />
              <br>

              <label>Paydown start year: {{ paydownStart.handle1 }}</label>
              <slider options="paydownStart" />
              <br>

              <label>Payment amount: 
                <span class="payment"> {{ paymentAmountPerPeriod | currency }}
                  <span ng-show="paydown.handle1"> + {{ paydown.handle1 | currency }} = 
                    {{ sumPaymentAndPaydown() | currency }}</span>
                </span>
              </label>
            </form>
        </div>

        <div class="schedule pull-left">
          <button 
              class="btn btn-info" 
              ng-click="generateAmortizationSchedule(); isDisplayingReport=true"
              >Generate Amortization Schedule</button>
              <br>
              <br>
              <div ng-show="isGeneratingSchedule">
                <img ng-src="images/spinner.gif" >
              </div>
              <div ng-show="!!data.length">
                <p>Scroll down to see the completed amortization schedule.</p>
              </div>
        </div>
      </div>

      <hr>
      <br><br>
      <div ng-repeat="item in data">

            <table class="table table-bordered table-striped">
                <tr class="info"><td colspan="20" >YEAR {{item.year}}</td></tr>
                <tr>
                    <th class="center" >pay period</th>
                    <th class="center" >payment</th>
                    <th class="center" >interest paid</th>
                    <th class="center" >principle paid</th>
                    <th class="center" >remaining balance</th>
                    <th class="center" >total cost</th>
                </tr>
                <tr ng-repeat="entry in item.entries">
                    <td class="center" >{{entry.payPeriod}}</td>
                    <td class="right" >{{entry.payment | currency }}</td>
                    <td class="right" >{{entry.interestPaid | currency }}</td>
                    <td class="right" >{{entry.principlePaid | currency }}</td>
                    <td class="right" >{{entry.remainingBalance | currency }}</td>
                    <td class="right" >{{entry.totalCost | currency }}</td>
                </tr>
            </table>

      </div>

    </div>



    <div pane heading="Formula">
      <h3>Mortage Amortization Formula</h3>
      <p>The formula below is used to calculate the payment amount per period.  Use the sliders to change the variables.</p>
      <hr>

      <div id="clearfix" >

        <div class="formula-sliders pull-left">
          <form>
              <label>Loan amount: {{ initialPrinciple.handle1 | currency }}</label>
              <slider options="initialPrinciple" />
              <br>

              <label>Annual interest rate: {{ annualIntrestRate.handle1 }}%</label>
              <slider options="annualIntrestRate"/>
              <br>

              <label>Number of years: {{ termInYears.handle1 }}</label>
              <slider options="termInYears" />
              <br>

            <label>Payment amount: <span class="payment"> {{ paymentAmountPerPeriod | currency}}</span>
            </label>
          </form>
        </div>

        <div class="pull-right formula">
          <img ng-src="/images/amortization-formula.gif">
        </div>

      </div>


      <table class="table table-bordered table-striped">
          <tr class="info"><td colspan="20" >Formula Breakdown</td></tr>
          <tr>
              <th class="center" >variable</th>
              <th class="center" >description</th>
              <th class="center" width="60">value</th>
              <th class="center" width="450">how we calculate the value</th>
          </tr>
          <tr>
              <td class="center" >P</td>
              <td class="left" >initial <u>P</u>rincipal (loan amount)</td>
              <td class="right" >{{ initialPrinciple.handle1 }}</td>
              <td class="left" >You provide the loan amount</td>
          </tr>
          <tr>
              <td class="center" >r</td>
              <td class="left" >interest <u>r</u>ate per period</td>
              <td class="right" >{{ annualIntrestRate.handle1 / 100 / 12 | number:5 }} </td>
              <td class="left" >{{ annualIntrestRate.handle1 }}% / 100 (conversion to decimal) / 12 (pay periods per year )</td>
          </tr>
          <tr>
              <td class="center" >n</td>
              <td class="left" >total <u>n</u>umber of payments or periods</td>
              <td class="right" >{{ termInYears.handle1 * 12 }}</td>
              <td class="left" >{{ termInYears.handle1 }} years x 12 pay periods per year </td>
          </tr>
          <tr>
              <td class="center" >A</td>
              <td class="left" >payment <u>A</u>mount per period</td>
              <td class="right" >{{ paymentAmountPerPeriod }} </td>
              <td class="left" >See formula above. (rounded off to dollars and cents)</td>
          </tr>
      </table>

    </div>


  </div><!-- tabs -->


</div><!-- Ctrl -->


